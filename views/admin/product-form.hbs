<div class="admin-page">
  <div class="admin-header">
    <a href="/admin/products" class="back-link">‚Üê Back to Products</a>
    <h1>{{#if isEdit}}Edit Product{{else}}New Product{{/if}}</h1>
  </div>
  
  {{#if error}}
  <div class="alert alert-error">{{error}}</div>
  {{/if}}
  
  <form 
    action="{{#if isEdit}}/admin/products/{{product._id}}/edit{{else}}/admin/products/new{{/if}}" 
    method="POST" 
    enctype="multipart/form-data"
    class="product-form"
  >
    <div class="form-group">
      <label for="name">Product Name *</label>
      <input 
        type="text" 
        id="name" 
        name="name" 
        value="{{#if product}}{{product.name}}{{/if}}"
        placeholder="Enter product name"
        required
      >
    </div>
    
    <div class="form-group">
      <label for="description">Description</label>
      <textarea 
        id="description" 
        name="description" 
        rows="4"
        placeholder="Enter product description"
      >{{#if product}}{{product.description}}{{/if}}</textarea>
    </div>
    
    <div class="form-row">
      <div class="form-group">
        <label for="price">Price (Dh) *</label>
        <input 
          type="number" 
          id="price" 
          name="price" 
          value="{{#if product}}{{product.price}}{{/if}}"
          placeholder="0.00"
          step="0.01"
          min="0"
          required
        >
      </div>
      
      <div class="form-group">
        <label for="color">Color *</label>
        <select id="color" name="color" required>
          <option value="">Select a color</option>
          {{#each colors}}
          <option value="{{this}}" {{#if (eq this ../product.color)}}selected{{/if}}>
            {{this}}
          </option>
          {{/each}}
        </select>
      </div>
    </div>
    
    <div class="form-group">
      <label for="stockCount">Stock Count</label>
      <input 
        type="number" 
        id="stockCount" 
        name="stockCount" 
        value="{{#if product}}{{product.stockCount}}{{else}}100{{/if}}"
        min="0"
      >
      <small>Set to 0 to mark as out of stock</small>
    </div>
    
    <div class="form-group">
      <label for="image">Product Image</label>
      {{#if isEdit}}
        {{#if product.imageUrl}}
        <div class="current-image">
          <p>Current image:</p>
          <img src="{{product.imageUrl}}" alt="{{product.name}}">
        </div>
        {{/if}}
      {{/if}}
      <input 
        type="file" 
        id="image" 
        name="image" 
        accept="image/jpeg,image/png,image/gif,image/webp"
      >
      <small>Max 5MB. JPEG, PNG, GIF, or WebP.</small>
    </div>
    
    <div class="form-actions">
      <a href="/admin/products" class="btn btn-outline">Cancel</a>
      <button type="submit" class="btn btn-primary">
        {{#if isEdit}}Save Changes{{else}}Create Product{{/if}}
      </button>
    </div>
  </form>
</div>
