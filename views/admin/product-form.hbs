<div class="admin-page">
  <div class="admin-header">
    <a href="/admin/products" class="back-link">‚Üê Back to Products</a>
    <h1>{{#if isEdit}}Edit Product{{else}}Add New Product{{/if}}</h1>
  </div>
  
  {{#if error}}
  <div class="alert alert-error">
    {{error}}
  </div>
  {{/if}}
  
  <div class="admin-form-container">
    <form action="{{#if isEdit}}/admin/products/{{product._id}}/edit{{else}}/admin/products/new{{/if}}" method="POST" enctype="multipart/form-data" class="admin-form">
      <div class="form-group">
        <label for="name">Product Name *</label>
        <input 
          type="text" 
          id="name" 
          name="name" 
          value="{{product.name}}"
          placeholder="e.g., Galaxy Swirl Marble"
          required
        >
      </div>
      
      <div class="form-group">
        <label for="description">Description *</label>
        <textarea 
          id="description" 
          name="description" 
          rows="4"
          placeholder="Describe your marble..."
          required
        >{{product.description}}</textarea>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="price">Price (Dh) *</label>
          <input 
            type="number" 
            id="price" 
            name="price" 
            value="{{product.price}}"
            placeholder="29.99"
            step="0.01"
            min="0"
            required
          >
        </div>
        
        <div class="form-group">
          <label for="color">Color *</label>
          <select id="color" name="color" required>
            <option value="">Select color...</option>
            {{#each colors}}
            <option value="{{this}}" {{#if (eq this ../product.color)}}selected{{/if}}>
              {{this}}
            </option>
            {{/each}}
          </select>
        </div>
      </div>
      
      <div class="form-group">
        <label for="stockCount">Stock Count</label>
        <input 
          type="number" 
          id="stockCount" 
          name="stockCount" 
          value="{{#if product.stockCount}}{{product.stockCount}}{{else}}100{{/if}}"
          min="0"
        >
        <p class="form-help">Products with 0 stock will be marked as "Out of Stock" automatically.</p>
      </div>
      
      <div class="form-group">
        <label for="image">Product Image</label>
        {{#if isEdit}}
          {{#if product.imageUrl}}
            <div class="current-image">
              <img src="{{product.imageUrl}}" alt="Current image" class="preview-image">
              <p class="form-help">Current image. Upload a new one to replace it.</p>
            </div>
          {{/if}}
        {{/if}}
        <input 
          type="file" 
          id="image" 
          name="image" 
          accept="image/jpeg,image/png,image/gif,image/webp"
          class="file-input"
        >
        <p class="form-help">Accepted formats: JPEG, PNG, GIF, WebP. Max 5MB.</p>
      </div>
      
      <div class="form-actions">
        <a href="/admin/products" class="btn btn-outline">Cancel</a>
        <button type="submit" class="btn btn-primary">
          {{#if isEdit}}Save Changes{{else}}Create Product{{/if}}
        </button>
      </div>
    </form>
  </div>
</div>
