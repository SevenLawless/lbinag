<div class="catalog-page">
  <div class="catalog-header">
    <h1>
      {{#if searchQuery}}
        Search: "{{searchQuery}}"
      {{else if selectedColor}}
        {{selectedColor}} Marbles
      {{else}}
        All Marbles
      {{/if}}
    </h1>
    <p class="result-count">{{resultCount}} products found</p>
  </div>
  
  <div class="catalog-layout">
    <aside class="catalog-sidebar">
      <h3>Filter by Color</h3>
      <ul class="color-filter-list">
        <li>
          <a href="/catalog" class="color-filter-item {{#unless selectedColor}}active{{/unless}}">
            <span class="color-dot all-colors"></span>
            All Colors
          </a>
        </li>
        {{#each colors}}
        <li>
          <a href="/catalog/color/{{this}}" class="color-filter-item {{#if (eq this ../selectedColor)}}active{{/if}}">
            <span class="color-dot" style="background-color: {{this}};"></span>
            {{this}}
          </a>
        </li>
        {{/each}}
      </ul>
    </aside>
    
    <div class="catalog-main">
      {{#if resultCount}}
      <div class="products-grid">
        {{#each products}}
        <a href="/catalog/{{this._id}}" class="product-card">
          <div class="product-image-container">
            {{#if this.imageUrl}}
            <img src="{{this.imageUrl}}" alt="{{this.name}}" class="product-image">
            {{else}}
            <div class="product-placeholder" style="background-color: {{this.color}};"></div>
            {{/if}}
          </div>
          <div class="product-info">
            <h3 class="product-name">{{this.name}}</h3>
            <div class="product-meta">
              <span class="product-price">{{this.price}} Dh</span>
              <span class="color-badge small" style="background-color: {{this.color}};">{{this.color}}</span>
            </div>
            {{#if this.inStock}}
            <span class="stock-status in-stock">In Stock</span>
            {{else}}
            <span class="stock-status out-of-stock">Out of Stock</span>
            {{/if}}
          </div>
        </a>
        {{/each}}
      </div>
      {{else}}
      <div class="no-results">
        <h2>No products found</h2>
        <p>Try adjusting your search or browse all products.</p>
        <a href="/catalog" class="btn btn-primary">View All Products</a>
      </div>
      {{/if}}
    </div>
  </div>
</div>
